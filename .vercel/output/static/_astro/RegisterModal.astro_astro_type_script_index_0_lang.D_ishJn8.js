import{a as m}from"./virtual.DtPxpe2a.js";console.log("Modal Script Loaded");const d=()=>{const e=document.getElementById("register-modal"),n=document.getElementById("register-form"),c=document.getElementById("programSlug"),i=document.getElementById("modal-title"),s=document.getElementById("submit-btn");if(!e||!n)return;document.addEventListener("click",r=>{const t=r.target.closest("[data-register]");t&&(console.log("Register Button Clicked:",t.dataset.slug),r.preventDefault(),c.value=t.dataset.slug||"",i&&(i.textContent=`Register â€” ${t.dataset.title}`),e.classList.remove("hidden"),e.classList.add("flex"),document.body.style.overflow="hidden")});const a=()=>{e.classList.add("hidden"),e.classList.remove("flex"),document.body.style.overflow="auto"};document.getElementById("close-register")?.addEventListener("click",a),e.addEventListener("click",r=>{r.target===e&&a()}),n.addEventListener("submit",async r=>{r.preventDefault(),s.disabled=!0,s.innerText="SENDING...";const o=new FormData(n);try{const{data:t,error:l}=await m.registerParticipant({programSlug:o.get("programSlug")?.toString()||"",participantName:o.get("name")?.toString()||"",email:o.get("email")?.toString()||"",phone:o.get("phone")?.toString()||""});l?alert("Error: "+l.message):(alert("Registration Successful!"),n.reset(),a())}catch(t){console.error("Submission error:",t),alert("A system error occurred.")}finally{s.disabled=!1,s.innerText="CONFIRM REGISTRATION"}})};d();document.addEventListener("astro:after-swap",d);
