---
const {
  slug,
  title,
  description,
  link,
  tag,
  accent = "#00f2ff",
  bgCard = "#1a1a1a",
  image,
} = Astro.props;
---

<div
  class="relative w-[340px] h-[450px] group transition-all duration-500"
  style={`--accent: ${accent}; --bg-card: ${bgCard};`}
>
  <div
    class="absolute inset-0 bg-[var(--accent)] opacity-10 blur-2xl group-hover:opacity-30 transition-opacity duration-700"
  >
  </div>

  <div
    class="absolute -left-3 top-1/4 w-5 h-1/2 bg-gray-800/80 transition-transform group-hover:-translate-x-1"
    style="clip-path: polygon(100% 0, 0 15%, 0 85%, 100% 100%);"
  >
  </div>
  <div
    class="absolute -right-3 top-1/4 w-5 h-1/2 bg-gray-800/80 transition-transform group-hover:translate-x-1"
    style="clip-path: polygon(0 0, 100% 15%, 100% 85%, 0 100%);"
  >
  </div>

  <div
    class="absolute inset-0 shadow-2xl bg-black"
    style="clip-path: polygon(20% 0%, 80% 0%, 100% 15%, 100% 85%, 80% 100%, 20% 100%, 0% 85%, 0% 15%);"
  >
    <div
      class="absolute inset-0 border border-[var(--accent)] opacity-40 group-hover:opacity-100 transition-opacity duration-500"
      style="clip-path: polygon(20% 0%, 80% 0%, 100% 15%, 100% 85%, 80% 100%, 20% 100%, 0% 85%, 0% 15%);"
    >
    </div>
  </div>

  <div
    class="absolute inset-[4px] overflow-hidden bg-gray-950"
    style="clip-path: polygon(20% 0%, 80% 0%, 100% 15%, 100% 85%, 80% 100%, 20% 100%, 0% 85%, 0% 15%);"
  >
    <img
      src={image}
      alt={title}
      class="w-full h-full object-cover opacity-40 group-hover:opacity-60 group-hover:scale-110 transition-all duration-1000"
    />

    <div
      class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-black/60"
    >
    </div>

    <div
      class="absolute inset-0 p-8 flex flex-col justify-between items-center text-center"
    >
      <div class="w-full">
        <div
          class="w-10 h-[1px] bg-[var(--accent)] mx-auto mb-3 shadow-[0_0_8px_var(--accent)]"
        >
        </div>
        <h2
          class="text-white font-black text-2xl uppercase tracking-[0.15em] drop-shadow-lg"
        >
          {title}
        </h2>
      </div>

      <div
        class="w-full h-32 border border-[var(--accent)]/20 bg-black/40 backdrop-blur-sm p-4
               opacity-0 translate-y-4 group-hover:opacity-100 group-hover:translate-y-0
               transition-all duration-500 flex items-center justify-center"
      >
        <p class="text-white/90 text-[10px] font-mono uppercase tracking-wider">
          {description}
        </p>
      </div>

      <div class="w-full space-y-3 z-10">
        <a
          href={link}
          class="block w-full py-2 bg-[var(--accent)] text-black text-[10px] font-black uppercase tracking-widest
                 hover:brightness-125 transition-all shadow-[0_0_15px_var(--accent)]"
        >
          Initialize Access
        </a>
         <!-- NEW: Register button -->
      <button
  data-register
  data-slug={slug}
  data-title={title}
  type="button"
  class="relative z-30 block w-full py-2 border border-[var(--accent)] text-[var(--accent)] text-[10px] font-bold uppercase tracking-widest hover:bg-[var(--accent)] hover:text-black transition"
>
  Register
</button>

        <div
          class="text-[var(--accent)] text-[8px] font-mono uppercase tracking-[0.4em] opacity-60"
        >
          {tag}
        </div>
      </div>
    </div>
  </div>

  <div
    class="absolute top-2 left-[23%] w-3 h-3 border-t-2 border-l-2 border-[var(--accent)] opacity-60"
  >
  </div>
  <div
    class="absolute bottom-2 right-[23%] w-3 h-3 border-b-2 border-r-2 border-[var(--accent)] opacity-60"
  >
  </div>
</div>
